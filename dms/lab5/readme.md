# lab5

Triggers

## init

- Выбирите СУБД `Oracle` для выполнения лабораторной.
- Оознакомтесь со скриптами создания и заполнения таблиц для выполнения лабораторной ([`lab1/create.sql`](https://github.com/Drapegnik/bsu/blob/master/dms/lab1/create.sql) + [`lab5/create.sql`](https://github.com/Drapegnik/bsu/blob/master/dms/lab5/create.sql)).
- Запустите скрипты на выполнение.

## task

1.  Создайте триггер, который при добавлении или обновлении записи в таблице `emp`, должен отменять действие и сообщать об ошибке:

    - если для сотрудника с семейным положением холост (s) в столбце `nchild` указывается данное, отличное от `NULL` или `0`;
    - если для любого сотрудника указывается отрицательное количество детей.

2.  Создайте триггер, который при добавлении или обновлении записи в таблице `emp` должен:

    - осуществлять вставку данного равного `0`, если для сотрудника с семейным положением холост (`s`) в столбце `nchild` указывается данное, отличное от `NULL` или `0`;

    - осуществлять вставку данного `NULL`, если для любого сотрудника указывается отрицательное количество детей.

3.  Создайте триггер, который при обновлении записи в таблице `emp` должен отменять действие и сообщать об ошибке, если для сотрудников, находящихся в браке (`m`) в столбце `nchild` новое значение отличается от текущего более чем на `1`.

4.  Создать триггер, который отменяет любые действия (начисление, изменение, удаление) с премиями (таблица `bonus`) для неработающих в настоящий момент в организации сотрудников и сообщает об ошибке.

5.  Создайте триггер, который до выполнения действия (вставка, обновление, удаление) с таблицей `job` создаёт запись в таблице `temp_table`, с указанием названия действия (`delete`, `update`, `insert`) активизирующего триггер.

---

> results check out in
> [`lab5.sql`](https://github.com/Drapegnik/bsu/blob/master/dms/lab5/lab5.sql)
